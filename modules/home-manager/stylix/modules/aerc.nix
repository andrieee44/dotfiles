{ config, lib, ... }:
{
  options.stylix.targets.custom.aerc.enable = lib.mkEnableOption "custom implementation of styling aerc";

  config.programs.aerc.stylesets =
    let
      colors = config.lib.stylix.colors.withHashtag;
      cfg = config.stylix.targets.custom.aerc;
    in
    {
      gui = lib.mkIf cfg.enable ''
        *.selected.bold=true
        statusline_default.bold=true
        border.reverse=false
        part_mimetype.dim=false

        error.fg=${colors.base00}
        warning.fg=${colors.base00}
        success.fg=${colors.base00}
        title.fg=${colors.base0D}
        title.bg=${colors.base00}
        statusline_default.fg=${colors.base00}
        statusline_default.bg=${colors.base0D}
        statusline_error.bg=${colors.base08}
        statusline_warning.bg=${colors.base0A}
        statusline_success.bg=${colors.base0B}
        msglist_default.fg=${colors.base05}
        msglist_default.selected.fg=${colors.base00}
        msglist_default.selected.bg=${colors.base05}
        msglist_read.fg=${colors.base05}
        msglist_read.selected.fg=${colors.base00}
        msglist_read.selected.bg=${colors.base05}
        msglist_deleted.fg=${colors.base08}
        msglist_deleted.selected.fg=${colors.base00}
        msglist_deleted.selected.bg=${colors.base08}
        msglist_result.fg=${colors.base0B}
        msglist_result.selected.fg=${colors.base00}
        msglist_result.selected.bg=${colors.base0B}
        msglist_marked.fg=${colors.base0E}
        msglist_marked.bg=${colors.base00}
        msglist_marked.selected.fg=${colors.base00}
        msglist_marked.selected.bg=${colors.base0E}
        msglist_flagged.fg=${colors.base0B}
        msglist_flagged.selected.fg=${colors.base00}
        msglist_flagged.selected.bg=${colors.base0B}
        msglist_unread.fg=${colors.base0E}
        msglist_unread.selected.fg=${colors.base00}
        msglist_unread.selected.bg=${colors.base0E}
        msglist_answered.fg=${colors.base0B}
        msglist_answered.selected.fg=${colors.base00}
        msglist_answered.selected.bg=${colors.base0B}
        tab.fg=${colors.base05}
        tab.bg=${colors.base03}
        tab.selected.bg=${colors.base0D}
        tab.selected.fg=${colors.base00}
        dirlist_default.selected.fg=${colors.base00}
        dirlist_default.selected.bg=${colors.base05}
        dirlist_unread.fg=${colors.base0E}
        dirlist_unread.selected.fg=${colors.base00}
        dirlist_unread.selected.bg=${colors.base0E}
        dirlist_recent.fg=${colors.base0D}
        dirlist_recent.selected.fg=${colors.base00}
        dirlist_recent.selected.bg=${colors.base0D}
        part_switcher.bg=${colors.base03}
        part_switcher.selected.bg=${colors.base0D}
        part_filename.fg=${colors.base05}
        part_filename.bg=${colors.base03}
        part_filename.selected.fg=${colors.base00}
        part_filename.selected.bg=${colors.base0D}
        part_mimetype.fg=${colors.base05}
        part_mimetype.bg=${colors.base03}
        part_mimetype.selected.fg=${colors.base00}
        part_mimetype.selected.bg=${colors.base0D}
        completion_default.fg=${colors.base05}
        completion_default.bg=${colors.base03}
        completion_default.selected.fg=${colors.base00}
        completion_default.selected.bg=${colors.base0D}
      '';

      tty = lib.mkIf cfg.enable ''
        *.selected.bold=true
        statusline_default.bold=true
        border.reverse=false
        part_mimetype.dim=false

        error.fg=0
        warning.fg=0
        success.fg=0
        title.fg=4
        title.bg=0
        statusline_default.fg=0
        statusline_default.bg=4
        statusline_error.bg=1
        statusline_warning.bg=3
        statusline_success.bg=2
        msglist_default.fg=7
        msglist_default.selected.fg=0
        msglist_default.selected.bg=7
        msglist_read.fg=7
        msglist_read.selected.fg=0
        msglist_read.selected.bg=7
        msglist_deleted.fg=1
        msglist_deleted.selected.fg=0
        msglist_deleted.selected.bg=1
        msglist_result.fg=2
        msglist_result.selected.fg=0
        msglist_result.selected.bg=2
        msglist_marked.fg=5
        msglist_marked.bg=0
        msglist_marked.selected.fg=0
        msglist_marked.selected.bg=5
        msglist_flagged.fg=2
        msglist_flagged.selected.fg=0
        msglist_flagged.selected.bg=2
        msglist_unread.fg=5
        msglist_unread.selected.fg=0
        msglist_unread.selected.bg=5
        tab.fg=7
        tab.bg=8
        tab.selected.bg=4
        tab.selected.fg=0
        dirlist_default.selected.fg=0
        dirlist_default.selected.bg=7
        dirlist_unread.fg=5
        dirlist_unread.selected.fg=0
        dirlist_unread.selected.bg=5
        dirlist_recent.fg=4
        dirlist_recent.selected.fg=0
        dirlist_recent.selected.bg=4
        part_switcher.bg=8
        part_switcher.selected.bg=4
        part_filename.fg=7
        part_filename.bg=8
        part_filename.selected.fg=0
        part_filename.selected.bg=4
        part_mimetype.fg=7
        part_mimetype.bg=8
        part_mimetype.selected.fg=0
        part_mimetype.selected.bg=4
        completion_default.fg=7
        completion_default.bg=8
        completion_default.selected.fg=0
        completion_default.selected.bg=4
      '';
    };
}
